matches = [m[0] for m in input().find_all(r/\d+|x/n)];
earliest, buses = matches[0], [(b, i) for i, b in matches[1..].enumerate() if b != "x"];

with_wait_times = [(id - (earliest % id), id) for id, _ in buses];
part1 = mul(min(with_wait_times));

fn chinese_remainder(n, a) {
  sum, prod = 0, mul(n);
  for i in 0..n.len() {
    p = prod // n[i];
    sum += a[i] * mod_inv(p, n[i]) * p;
  };
  return sum % prod;
};

part2 = chinese_remainder(
  [id for id, _ in buses],
  [(id - i) % id for id, i in buses]
);

print("Part 1:", part1);
print("Part 2:", part2);
