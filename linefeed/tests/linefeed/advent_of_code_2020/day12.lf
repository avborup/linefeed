moves = [line.find(r/(\w)(\d+)/n) for line in input().lines()];

ship1, dir = (0, 0), (1, 0);
ship2, wp = (0, 0), (10, 1);
for action, amount in moves {
  match action {
    "N" => ship1 += (0, amount),
    "S" => ship1 -= (0, amount),
    "E" => ship1 += (amount, 0),
    "W" => ship1 -= (amount, 0),
    "L" => { dir = dir.rot(-amount / 90) },
    "R" => { dir = dir.rot(amount / 90) },
    "F" => ship1 += amount * dir
  };

  match action {
    "N" => wp += (0, amount),
    "S" => wp -= (0, amount),
    "E" => wp += (amount, 0),
    "W" => wp -= (amount, 0),
    "L" => { wp = wp.rot(-amount / 90) },
    "R" => { wp = wp.rot(amount / 90) },
    "F" => { ship2 += amount * wp }
  };
};

print("Part 1:", manhattan(ship1));
print("Part 2:", manhattan(ship2));
