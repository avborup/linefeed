fn parse() {
  rules_str, own_str, nearby_str = input().split("\n\n");

  rules = [];
  for line in rules_str.lines() {
    min1, max1, min2, max2 = line.find(r/(\d+)-(\d+) or (\d+)-(\d+)/n);
    rules.append(((min1..=max1), (min2..=max2)));
  };

  own = [m[0] for m in own_str.find_all(r/(\d+)/n)];
  nearby = [[m[0] for m in line.find_all(r/(\d+)/n)] for line in (nearby_str.lines())[1..]];

  (rules, own, nearby)
};

rules, own, nearby = parse();

part1 = 0;
for ticket in nearby {
  for value in ticket {
    continue if any([(value in range1 or value in range2) for (range1, range2) in rules]);
    part1 += value;
  };
};

print("Part 1:", part1);
