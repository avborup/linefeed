fn binary_search(pass) {
  lo, hi = (0, 2 ** pass.len() - 1);
  for c in pass {
      mid = (lo + hi) // 2;
      if c in "FL" { hi = mid } else
      if c in "BR" { lo = mid + 1 };
  };
};

seats = []
for pass in input().lines() {
  row, col = (binary_search(pass[..7]), binary_search(pass[7..]));
  seats.append(row * 8 + col);
};

for i in 1..seats.sort().len() {
  part2 = seats[i] - 1 if seats[i-1] != seats[i] - 1;
};

print("Part 1: " + max(seats));
print("Part 2: " + (part2 or "?"));
